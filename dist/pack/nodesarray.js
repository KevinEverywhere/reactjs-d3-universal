'use strict';Object.defineProperty(exports,'__esModule',{value:!0});exports.nodesArray=exports.Text=void 0;var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var _react=require('react'),_react2=_interopRequireDefault(_react),_d=require('d3'),d3=_interopRequireWildcard(_d);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return call&&('object'==typeof call||'function'==typeof call)?call:self}function _inherits(subClass,superClass){if('function'!=typeof superClass&&null!==superClass)throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Text=exports.Text=function(_React$Component){function Text(a){_classCallCheck(this,Text);var _this=_possibleConstructorReturn(this,(Text.__proto__||Object.getPrototypeOf(Text)).call(this,a));return _this.state={fontSize:'12px'},_initialiseProps.call(_this),_this.state={fontSize:'12px'},_this}return _inherits(Text,_React$Component),_createClass(Text,[{key:'componentDidMount',value:function componentDidMount(){// initially set size based on current browser width
// this.setSize();
// update chart size whenever browser resizes
}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(a){appFuncs._.isEqual(a,this.props)||this.setSize()}},{key:'shouldComponentUpdate',value:function shouldComponentUpdate(a,b){// only update if state or props have changed
return!appFuncs._.isEqual(b,this.state)||!appFuncs._.isEqual(a,this.props)}/**
   * retrieves container dimensions from client and updates state which triggers redraw
   */},{key:'render',value:function render(){var _this2=this,_props=this.props,a=_props.d,b=_props.root,c=_props.labels;return _react2.default.createElement('text',{ref:function ref(e){return _this2.text=e},x:a.x,y:a.y,textAnchor:'middle','data-diameter':2*a.r,className:'label',fontSize:this.state.fontSize,style:{display:a.parent===b?'inline':'inline',// 'none',
fillOpacity:a.parent===b?1:1}},a.data[c[0]])}}]),Text}(_react2.default.Component);var _initialiseProps=function(){var _this3=this;this.setSize=function(){var a=_this3.props.d.data[_this3.props.labels[0]].length,b=9<a?1:5<a?2.2:2.9,c=25*_this3.props.d.r*b/window.innerWidth;return 1<Math.abs(parseInt(_this3.state.fontSize)-c)&&_this3.setState({fontSize:c+'vw'}),!0}};var nodesArray=exports.nodesArray=function(_ref){var a=_ref.nodes,b=_ref.colorScale,c=_ref.zoom,e=_ref.root,f=_ref.labels,g=[];return a.forEach(function(h,i){return g.push(// TODO: add click handler to each circle for zoom
_react2.default.createElement('g',{key:i},_react2.default.createElement('circle',{r:h.r,cx:h.x,cy:h.y,className:h.parent?h.children?'node':'node node--leaf':'node node--root',onClick:c,style:{fill:h.children?b(h.depth):'white',stroke:'#fff',strokeWidth:'1.5px'}}),!h.children&&_react2.default.createElement(Text,{d:h,root:e,labels:f})))}),g};