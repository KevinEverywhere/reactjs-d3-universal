'use strict';Object.defineProperty(exports,'__esModule',{value:!0});exports.getTextPath=void 0;var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var _react=require('react'),_react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return call&&('object'==typeof call||'function'==typeof call)?call:self}function _inherits(subClass,superClass){if('function'!=typeof superClass&&null!==superClass)throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var getTextPath=exports.getTextPath=function(a){return'm-'+a+', '+0.1*a+' a'+a+', '+0.83*a+' 0 1 1 '+2*a+', 0'};var Text=function(_React$Component){function Text(a){_classCallCheck(this,Text);var _this=_possibleConstructorReturn(this,(Text.__proto__||Object.getPrototypeOf(Text)).call(this,a));return _this.state={fontSize:'3'},_initialiseProps.call(_this),_this.state={fontSize:'3'},_this}return _inherits(Text,_React$Component),_createClass(Text,null,[{key:'defaultProps',get:function get(){return{r:2,d:{},idx:0,labels:[],scale:1}}}]),_createClass(Text,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(a){appFuncs._.isEqual(a,this.props)||this.setSize(a)}/**
   * retrieves container dimensions from client and updates state which triggers redraw
   */},{key:'render',value:function render(){var _this2=this,_props=this.props,a=_props.d,b=_props.labels,c=_props.r,e=_props.idx;//console.log(this.props.scale);
return _react2.default.createElement('g',null,_react2.default.createElement('defs',null,_react2.default.createElement('path',{id:'path'+e+a.value+parseInt(a.r),d:getTextPath(c,b)})),_react2.default.createElement('text',{className:'label'+e,ref:function ref(f){return _this2.text=f},style:{display:'inline',fillOpacity:1,textTransform:'uppercase',fontSize:1.1*(this.state.fontSize/this.props.scale)+'px'},textAnchor:'middle'},_react2.default.createElement('textPath',{xlinkHref:'#path'+e+a.value+parseInt(a.r),startOffset:'50%'},a.data[b[0]])))}}]),Text}(_react2.default.Component);Text.propTypes={r:_react2.default.PropTypes.number,d:_react2.default.PropTypes.object,idx:_react2.default.PropTypes.number,labels:_react2.default.PropTypes.array};var _initialiseProps=function(){var _this3=this;this.setSize=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_this3.props,// TODO: update this to get the formatted label
b=a.d.data[a.labels[0]].length,c=// eslint-disable-line
// TODO: convert this to automatically adjust based on width of container not length of chars
13<b?0.3:9<b?0.4:7<b?0.5:5<b?0.5:0.7,e=c*a.r/2;1<Math.abs(parseInt(_this3.state.fontSize)-e)&&_this3.setState({fontSize:e})}};exports.default=Text;